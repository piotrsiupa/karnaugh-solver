library IEEE;
use IEEE.std_logic_1164.all;

entity very_optimizable is
	port(
		a, b, c, d : in std_logic;
		first, second, third, fourth : out std_logic
	);
end very_optimizable;

architecture behavioural of very_optimizable is
	-- Internal signals
	signal int_prods : std_logic_vector(9 downto 0);
	signal int_sums : std_logic_vector(4 downto 0);
	
begin
	
	-- Products
	int_prods(0) <= a and b and c and d;
	int_prods(1) <= not c and d;
	int_prods(2) <= not a and b;
	int_prods(3) <= int_prods(2) and int_prods(1);
	int_prods(4) <= c and not d;
	int_prods(5) <= int_prods(2) and int_prods(4);
	int_prods(6) <= a and not b;
	int_prods(7) <= int_prods(1) and int_prods(6);
	int_prods(8) <= int_prods(4) and int_prods(6);
	int_prods(9) <= not a and not b and not c and not d;
	
	-- Sums
	int_sums(0) <= int_prods(5) or int_prods(7);
	int_sums(1) <= int_prods(3) or int_sums(0);
	int_sums(2) <= int_prods(8) or int_sums(1);
	int_sums(3) <= int_prods(0) or int_sums(1);
	int_sums(4) <= int_prods(9) or int_sums(0);
	
	-- Results
	first <= int_sums(2);
	second <= int_sums(3);
	third <= int_sums(1);
	fourth <= int_sums(4);
	
end behavioural;
